2026-01-01T04:16:31.793Z	Initializing build environment...
2026-01-01T04:16:33.222Z	Success: Finished initializing build environment
2026-01-01T04:16:33.634Z	Cloning repository...
2026-01-01T04:16:36.249Z	Detected the following tools from environment: pnpm@10.11.1, nodejs@22.16.0
2026-01-01T04:16:36.251Z	Restoring from dependencies cache
2026-01-01T04:16:36.252Z	Restoring from build output cache
2026-01-01T04:16:44.661Z	Success: Build output restored from build cache.
2026-01-01T04:17:09.775Z	Success: Dependencies restored from build cache.
2026-01-01T04:17:09.943Z	Installing project dependencies: pnpm install --frozen-lockfile
2026-01-01T04:17:15.378Z	Lockfile is up to date, resolution step is skipped
2026-01-01T04:17:15.565Z	Progress: resolved 1, reused 0, downloaded 0, added 0
2026-01-01T04:17:15.806Z	Packages: +1374
2026-01-01T04:17:15.807Z	++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
2026-01-01T04:17:16.567Z	Progress: resolved 1374, reused 660, downloaded 0, added 0
2026-01-01T04:17:17.566Z	Progress: resolved 1374, reused 1373, downloaded 0, added 302
2026-01-01T04:17:18.567Z	Progress: resolved 1374, reused 1373, downloaded 0, added 1373
2026-01-01T04:17:18.779Z	Progress: resolved 1374, reused 1373, downloaded 0, added 1374, done
2026-01-01T04:17:19.071Z	The following dependencies have build scripts that were ignored: @tailwindcss/oxide, esbuild, rclone.js, unrs-resolver, workerd
2026-01-01T04:17:37.130Z	
2026-01-01T04:17:37.131Z	dependencies:
2026-01-01T04:17:37.131Z	+ @ai-sdk/react 2.0.89
2026-01-01T04:17:37.131Z	+ @ai-sdk/replicate 1.0.8
2026-01-01T04:17:37.131Z	+ @better-fetch/fetch 1.1.18
2026-01-01T04:17:37.131Z	+ @dnd-kit/core 6.3.1
2026-01-01T04:17:37.131Z	+ @dnd-kit/modifiers 9.0.0
2026-01-01T04:17:37.131Z	+ @dnd-kit/sortable 10.0.0
2026-01-01T04:17:37.131Z	+ @dnd-kit/utilities 3.2.2
2026-01-01T04:17:37.131Z	+ @hookform/resolvers 5.2.1
2026-01-01T04:17:37.131Z	+ @libsql/client 0.15.15
2026-01-01T04:17:37.131Z	+ @next/bundle-analyzer 15.5.6
2026-01-01T04:17:37.131Z	+ @next/third-parties 16.0.0-beta.0
2026-01-01T04:17:37.131Z	+ @opennextjs/cloudflare 1.11.1
2026-01-01T04:17:37.131Z	+ @openrouter/ai-sdk-provider 1.2.0
2026-01-01T04:17:37.131Z	+ @paypal/checkout-server-sdk 1.0.3
2026-01-01T04:17:37.131Z	+ @paypal/paypal-server-sdk 1.1.0
2026-01-01T04:17:37.131Z	+ @radix-ui/react-accordion 1.2.12
2026-01-01T04:17:37.131Z	+ @radix-ui/react-avatar 1.1.10
2026-01-01T04:17:37.131Z	+ @radix-ui/react-checkbox 1.3.3
2026-01-01T04:17:37.131Z	+ @radix-ui/react-collapsible 1.1.12
2026-01-01T04:17:37.131Z	+ @radix-ui/react-dialog 1.1.15
2026-01-01T04:17:37.131Z	+ @radix-ui/react-dropdown-menu 2.1.16
2026-01-01T04:17:37.131Z	+ @radix-ui/react-hover-card 1.1.15
2026-01-01T04:17:37.131Z	+ @radix-ui/react-icons 1.3.2
2026-01-01T04:17:37.131Z	+ @radix-ui/react-label 2.1.7
2026-01-01T04:17:37.131Z	+ @radix-ui/react-navigation-menu 1.2.14
2026-01-01T04:17:37.131Z	+ @radix-ui/react-progress 1.1.7
2026-01-01T04:17:37.131Z	+ @radix-ui/react-radio-group 1.3.8
2026-01-01T04:17:37.131Z	+ @radix-ui/react-scroll-area 1.2.10
2026-01-01T04:17:37.131Z	+ @radix-ui/react-select 2.2.6
2026-01-01T04:17:37.131Z	+ @radix-ui/react-separator 1.1.7
2026-01-01T04:17:37.131Z	+ @radix-ui/react-slot 1.2.3
2026-01-01T04:17:37.132Z	+ @radix-ui/react-switch 1.2.6
2026-01-01T04:17:37.132Z	+ @radix-ui/react-tabs 1.1.13
2026-01-01T04:17:37.132Z	+ @radix-ui/react-toggle 1.1.10
2026-01-01T04:17:37.132Z	+ @radix-ui/react-toggle-group 1.1.11
2026-01-01T04:17:37.132Z	+ @radix-ui/react-tooltip 1.2.8
2026-01-01T04:17:37.132Z	+ @radix-ui/react-use-controllable-state 1.2.2
2026-01-01T04:17:37.132Z	+ @tabler/icons-react 3.34.1
2026-01-01T04:17:37.132Z	+ @tanstack/react-table 8.21.3
2026-01-01T04:17:37.132Z	+ @types/mdx 2.0.13
2026-01-01T04:17:37.132Z	+ @vercel/analytics 1.5.0
2026-01-01T04:17:37.132Z	+ ai 5.0.39
2026-01-01T04:17:37.132Z	+ ai-elements 1.6.0
2026-01-01T04:17:37.132Z	+ aws4fetch 1.0.20
2026-01-01T04:17:37.132Z	+ better-auth 1.3.9
2026-01-01T04:17:37.132Z	+ class-variance-authority 0.7.1
2026-01-01T04:17:37.132Z	+ clsx 2.1.1
2026-01-01T04:17:37.132Z	+ cmdk 1.1.1
2026-01-01T04:17:37.132Z	+ creem 0.3.37
2026-01-01T04:17:37.132Z	+ dotenv 17.2.2
2026-01-01T04:17:37.132Z	+ drizzle-orm 0.44.5
2026-01-01T04:17:37.132Z	+ embla-carousel-auto-scroll 8.6.0
2026-01-01T04:17:37.132Z	+ embla-carousel-react 8.6.0
2026-01-01T04:17:37.132Z	+ framer-motion 12.23.12
2026-01-01T04:17:37.132Z	+ fumadocs-core 15.7.12
2026-01-01T04:17:37.132Z	+ fumadocs-mdx 11.10.0
2026-01-01T04:17:37.133Z	+ fumadocs-ui 15.7.12
2026-01-01T04:17:37.133Z	+ github-markdown-css 5.8.1
2026-01-01T04:17:37.133Z	+ github-slugger 2.0.0
2026-01-01T04:17:37.133Z	+ lucide-react 0.543.0
2026-01-01T04:17:37.133Z	+ lunar-typescript 1.8.6
2026-01-01T04:17:37.133Z	+ markdown-it 14.1.0
2026-01-01T04:17:37.133Z	+ moment 2.30.1
2026-01-01T04:17:37.133Z	+ motion 12.23.12
2026-01-01T04:17:37.133Z	+ nanoid 5.1.6
2026-01-01T04:17:37.133Z	+ next 15.5.5
2026-01-01T04:17:37.133Z	+ next-intl 4.3.6
2026-01-01T04:17:37.133Z	+ next-mdx-remote 5.0.0
2026-01-01T04:17:37.133Z	+ next-themes 0.4.6
2026-01-01T04:17:37.133Z	+ nextjs-toploader 3.9.17
2026-01-01T04:17:37.133Z	+ overtype 1.2.6
2026-01-01T04:17:37.133Z	+ postgres 3.4.7
2026-01-01T04:17:37.133Z	+ react 19.2.0
2026-01-01T04:17:37.133Z	+ react-copy-to-clipboard 5.1.0
2026-01-01T04:17:37.133Z	+ react-dom 19.2.0
2026-01-01T04:17:37.133Z	+ react-hook-form 7.62.0
2026-01-01T04:17:37.133Z	+ react-icons 5.5.0
2026-01-01T04:17:37.133Z	+ react-lazy-load-image-component 1.6.3
2026-01-01T04:17:37.133Z	+ react-mobile-datepicker 4.0.2
2026-01-01T04:17:37.133Z	+ react-use-measure 2.1.7
2026-01-01T04:17:37.133Z	+ recharts 2.15.4
2026-01-01T04:17:37.133Z	+ rehype-autolink-headings 7.1.0
2026-01-01T04:17:37.133Z	+ rehype-slug 6.0.0
2026-01-01T04:17:37.133Z	+ remark-gfm 4.0.1
2026-01-01T04:17:37.133Z	+ replicate 1.3.1
2026-01-01T04:17:37.133Z	+ resend 6.0.3
2026-01-01T04:17:37.133Z	+ rough-notation 0.5.1
2026-01-01T04:17:37.133Z	+ sharp 0.34.5
2026-01-01T04:17:37.133Z	+ simple-flakeid 0.0.5
2026-01-01T04:17:37.133Z	+ sonner 2.0.7
2026-01-01T04:17:37.133Z	+ streamdown 1.4.0
2026-01-01T04:17:37.133Z	+ stripe 18.5.0
2026-01-01T04:17:37.133Z	+ swiper 12.0.1
2026-01-01T04:17:37.133Z	+ tailwind-merge 3.3.1
2026-01-01T04:17:37.133Z	+ tailwindcss-animate 1.0.7
2026-01-01T04:17:37.134Z	+ use-stick-to-bottom 1.1.1
2026-01-01T04:17:37.134Z	+ uuid 13.0.0
2026-01-01T04:17:37.134Z	+ vaul 1.1.2
2026-01-01T04:17:37.134Z	+ zod 4.1.5
2026-01-01T04:17:37.134Z	
2026-01-01T04:17:37.134Z	devDependencies:
2026-01-01T04:17:37.134Z	+ @eslint/eslintrc 3.3.1
2026-01-01T04:17:37.134Z	+ @ianvs/prettier-plugin-sort-imports 4.7.0
2026-01-01T04:17:37.134Z	+ @img/sharp-win32-x64 0.34.5
2026-01-01T04:17:37.134Z	+ @tailwindcss/postcss 4.1.13
2026-01-01T04:17:37.134Z	+ @types/markdown-it 14.1.2
2026-01-01T04:17:37.134Z	+ @types/node 20.19.13
2026-01-01T04:17:37.134Z	+ @types/pg 8.15.5
2026-01-01T04:17:37.134Z	+ @types/react 19.2.2
2026-01-01T04:17:37.134Z	+ @types/react-copy-to-clipboard 5.0.7
2026-01-01T04:17:37.134Z	+ @types/react-dom 19.2.1
2026-01-01T04:17:37.134Z	+ @types/react-lazy-load-image-component 1.6.4
2026-01-01T04:17:37.134Z	+ autoprefixer 10.4.21
2026-01-01T04:17:37.134Z	+ babel-plugin-react-compiler 1.0.0
2026-01-01T04:17:37.134Z	+ drizzle-kit 0.31.4
2026-01-01T04:17:37.134Z	+ eslint 9.37.0
2026-01-01T04:17:37.134Z	+ eslint-config-next 16.0.0-beta.0
2026-01-01T04:17:37.134Z	+ eslint-plugin-i18next 6.1.3
2026-01-01T04:17:37.134Z	+ postcss 8.5.6
2026-01-01T04:17:37.134Z	+ prettier 3.6.2
2026-01-01T04:17:37.134Z	+ prettier-plugin-tailwindcss 0.7.1
2026-01-01T04:17:37.134Z	+ tailwindcss 4.1.13
2026-01-01T04:17:37.134Z	+ tsx 4.20.5
2026-01-01T04:17:37.134Z	+ tw-animate-css 1.3.8
2026-01-01T04:17:37.134Z	+ typescript 5.9.2
2026-01-01T04:17:37.134Z	+ wrangler 4.34.0
2026-01-01T04:17:37.134Z	
2026-01-01T04:17:37.228Z	
2026-01-01T04:17:37.228Z	> mfexai-v2@1.2.0 postinstall /opt/buildhome/repo
2026-01-01T04:17:37.228Z	> fumadocs-mdx
2026-01-01T04:17:37.228Z	
2026-01-01T04:17:37.567Z	[MDX] types generated
2026-01-01T04:17:37.579Z	Done in 27s
2026-01-01T04:17:37.767Z	Executing user build command: npx opennextjs-cloudflare build --noMinify
2026-01-01T04:17:39.509Z	
2026-01-01T04:17:39.509Z	┌─────────────────────────────┐
2026-01-01T04:17:39.509Z	│ OpenNext — Cloudflare build │
2026-01-01T04:17:39.509Z	└─────────────────────────────┘
2026-01-01T04:17:39.509Z	
2026-01-01T04:17:39.604Z	▲ [WARNING] Processing wrangler.json configuration:
2026-01-01T04:17:39.604Z	
2026-01-01T04:17:39.604Z	    - Unexpected fields found in observability field: "persist"
2026-01-01T04:17:39.604Z	
2026-01-01T04:17:39.604Z	
2026-01-01T04:17:39.604Z	App directory: /opt/buildhome/repo
2026-01-01T04:17:39.604Z	Next.js version : 15.5.5
2026-01-01T04:17:39.604Z	@opennextjs/cloudflare version: 1.11.1
2026-01-01T04:17:39.604Z	@opennextjs/aws version: 3.8.5
2026-01-01T04:17:39.605Z	
2026-01-01T04:17:39.605Z	┌─────────────────────────────────┐
2026-01-01T04:17:39.605Z	│ OpenNext — Building Next.js app │
2026-01-01T04:17:39.605Z	└─────────────────────────────────┘
2026-01-01T04:17:39.605Z	
2026-01-01T04:17:39.920Z	
2026-01-01T04:17:39.920Z	> mfexai-v2@1.2.0 build /opt/buildhome/repo
2026-01-01T04:17:39.920Z	> next build
2026-01-01T04:17:39.920Z	
2026-01-01T04:17:40.459Z	 ⚠ Invalid next.config.mjs options detected: 
2026-01-01T04:17:40.459Z	 ⚠     Unrecognized key(s) in object: 'turbopackFileSystemCacheForDev' at "experimental"
2026-01-01T04:17:40.459Z	 ⚠     Unrecognized key(s) in object: 'reactCompiler'
2026-01-01T04:17:40.459Z	 ⚠ See more info here: https://nextjs.org/docs/messages/invalid-next-config
2026-01-01T04:17:40.554Z	   ▲ Next.js 15.5.5
2026-01-01T04:17:40.555Z	   - Experiments (use with caution):
2026-01-01T04:17:40.555Z	     ✓ mdxRs
2026-01-01T04:17:40.555Z	     ✓ turbopackFileSystemCacheForDev
2026-01-01T04:17:40.555Z	
2026-01-01T04:17:41.266Z	▲ [WARNING] Processing wrangler.json configuration:
2026-01-01T04:17:41.266Z	
2026-01-01T04:17:41.267Z	    - Unexpected fields found in observability field: "persist"
2026-01-01T04:17:41.267Z	
2026-01-01T04:17:41.267Z	
2026-01-01T04:17:41.268Z	Using vars defined in .dev.vars
2026-01-01T04:17:41.580Z	   Creating an optimized production build ...
2026-01-01T04:17:41.625Z	[MDX] updated map file in 26.01062500000012ms
2026-01-01T04:18:36.356Z	 ✓ Compiled successfully in 54s
2026-01-01T04:18:36.376Z	   Skipping linting
2026-01-01T04:18:36.380Z	   Checking validity of types ...
2026-01-01T04:18:52.990Z	Failed to compile.
2026-01-01T04:18:52.990Z	
2026-01-01T04:18:52.990Z	./src/app/api/admin/notifications/send/route.ts:79:7
2026-01-01T04:18:52.990Z	Type error: Type '{ token: string | null; userId: string; locale: string | null; }[]' is not assignable to type '{ token: string; userId: string; locale: string | null; }[]'.
2026-01-01T04:18:52.990Z	  Type '{ token: string | null; userId: string; locale: string | null; }' is not assignable to type '{ token: string; userId: string; locale: string | null; }'.
2026-01-01T04:18:52.990Z	    Types of property 'token' are incompatible.
2026-01-01T04:18:52.990Z	      Type 'string | null' is not assignable to type 'string'.
2026-01-01T04:18:52.990Z	        Type 'null' is not assignable to type 'string'.
2026-01-01T04:18:52.990Z	
2026-01-01T04:18:52.990Z	  77 |         .from(appUserDevice);
2026-01-01T04:18:52.990Z	  78 |       // 筛选匹配语言的设备
2026-01-01T04:18:52.990Z	> 79 |       devices = allDevices.filter(d => (d.locale || 'en') === targetLanguage);
2026-01-01T04:18:52.990Z	     |       ^
2026-01-01T04:18:52.990Z	  80 |     } else if (notification.targetType === 'specific' && notification.targetUserIds) {
2026-01-01T04:18:52.990Z	  81 |       // 发送给指定用户
2026-01-01T04:18:52.990Z	  82 |       const targetUserIds: string[] = JSON.parse(notification.targetUserIds);
2026-01-01T04:18:53.139Z	Next.js build worker exited with code: 1 and signal: null
2026-01-01T04:18:53.307Z	 ELIFECYCLE  Command failed with exit code 1.
2026-01-01T04:18:53.343Z	opennextjs-cloudflare build
2026-01-01T04:18:53.343Z	
2026-01-01T04:18:53.343Z	Build an OpenNext Cloudflare worker
2026-01-01T04:18:53.343Z	
2026-01-01T04:18:53.343Z	Options:
2026-01-01T04:18:53.343Z	      --help                        Show help                          [boolean]
2026-01-01T04:18:53.343Z	      --version                     Show version number                [boolean]
2026-01-01T04:18:53.343Z	  -c, --config                      Path to Wrangler configuration file [string]
2026-01-01T04:18:53.343Z	      --configPath                  Path to Wrangler configuration file
2026-01-01T04:18:53.343Z	                                                           [deprecated] [string]
2026-01-01T04:18:53.343Z	  -e, --env                         Wrangler environment to use for operations
2026-01-01T04:18:53.343Z	                                                                        [string]
2026-01-01T04:18:53.344Z	  -s, --skipNextBuild, --skipBuild  Skip building the Next.js app
2026-01-01T04:18:53.344Z	                                                      [boolean] [default: false]
2026-01-01T04:18:53.344Z	      --noMinify                    Disable worker minification
2026-01-01T04:18:53.344Z	                                                      [boolean] [default: false]
2026-01-01T04:18:53.344Z	      --skipWranglerConfigCheck     Skip checking for a Wrangler config
2026-01-01T04:18:53.344Z	                                                      [boolean] [default: false]
2026-01-01T04:18:53.344Z	      --openNextConfigPath          Path to the OpenNext configuration file
2026-01-01T04:18:53.344Z	                                                                        [string]
2026-01-01T04:18:53.344Z	
2026-01-01T04:18:53.344Z	Error: Command failed: pnpm build
2026-01-01T04:18:53.344Z	    at genericNodeError (node:internal/errors:983:15)
2026-01-01T04:18:53.344Z	    at wrappedFn (node:internal/errors:537:14)
2026-01-01T04:18:53.344Z	    at checkExecSyncError (node:child_process:882:11)
2026-01-01T04:18:53.344Z	    at Object.execSync (node:child_process:954:15)
2026-01-01T04:18:53.344Z	    at buildNextjsApp (file:///opt/buildhome/repo/node_modules/.pnpm/@opennextjs+aws@3.8.5/node_modules/@opennextjs/aws/dist/build/buildNextApp.js:15:8)
2026-01-01T04:18:53.344Z	    at build (file:///opt/buildhome/repo/node_modules/.pnpm/@opennextjs+cloudflare@1.11.1_wrangler@4.34.0/node_modules/@opennextjs/cloudflare/dist/cli/build/build.js:47:9)
2026-01-01T04:18:53.344Z	    at buildCommand (file:///opt/buildhome/repo/node_modules/.pnpm/@opennextjs+cloudflare@1.11.1_wrangler@4.34.0/node_modules/@opennextjs/cloudflare/dist/cli/commands/build.js:21:11) {
2026-01-01T04:18:53.345Z	  status: 1,
2026-01-01T04:18:53.345Z	  signal: null,
2026-01-01T04:18:53.345Z	  output: [ null, null, null ],
2026-01-01T04:18:53.345Z	  pid: 745,
2026-01-01T04:18:53.345Z	  stdout: null,
2026-01-01T04:18:53.345Z	  stderr: null
2026-01-01T04:18:53.345Z	}
2026-01-01T04:18:53.415Z	Failed: error occurred while running build command